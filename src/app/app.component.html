<header class="header-nav">
  <div class="container nav-container">
    <a routerLink="/" class="nav-brand">B3D Plásticos</a>
    <nav>
      <a routerLink="/tienda" routerLinkActive="active">Tienda</a>

      @if (authService.isLoggedIn()) {
        <a routerLink="/historial" routerLinkActive="active">Mis Pedidos</a>
      }

      <div class="profile-section">
        @if (authService.isLoggedIn()) { <button class="profile-trigger" (click)="toggleMenu()">
             <span>{{ getUserInitials() }}</span> </button>

          <div class="profile-menu" [class.show]="menuVisible()">
             <div class="profile-menu-header">
                <span class="profile-menu-avatar">{{ getUserInitials() }}</span> <strong>{{ authService.currentUserName() || 'Usuario' }}</strong> <small>{{ authService.currentUserEmail() || 'email@ejemplo.com' }}</small> </div>
             <ul>
               <li><a routerLink="/perfil">👤 Mi perfil</a></li> <li><a routerLink="/historial">🛍️ Mis pedidos</a></li>
               <li><a routerLink="/favoritos">❤️ Favoritos</a></li> <li><hr></li>
               <li><a (click)="logout()" style="cursor: pointer;">↪️ Cerrar sesión</a></li>
             </ul>
          </div>
        } @else {
          <a routerLink="/auth" routerLinkActive="active" class="nav-cta">Login</a>
        }
      </div>

      <a routerLink="/carrito" routerLinkActive="active" class="nav-carrito">
        <span class="carrito-icon">🛒</span>
      </a>
    </nav>
  </div>
</header>

<main>
  <div class="container main-content">
    <router-outlet></router-outlet>
  </div>
</main>

<footer class="footer">
  <div class="container">
    <p>&copy; 2025 B3D Casa Bureu Plásticos. Todos los derechos reservados.</p>
  </div>
</footer>